<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How I Migrated My WordPress Site to GitHub Pages</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How I Migrated My WordPress Site to GitHub Pages</h1>
</header>
<section data-field="subtitle" class="p-summary">
A step-by-step guide to a brand-new website
</section>
<section data-field="body" class="e-content">
<section name="bab3" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="33c4" id="33c4" class="graf graf--h3 graf--leading graf--title">How I Migrated My WordPress Site to GitHub Pages</h3><h4 name="9462" id="9462" class="graf graf--h4 graf-after--h3 graf--subtitle">A step-by-step guide to a brand-new website</h4><figure name="1f1b" id="1f1b" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*jVSikrt5AJTjYFdmR1owCQ.png" data-width="1532" data-height="612" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*jVSikrt5AJTjYFdmR1owCQ.png"><figcaption class="imageCaption">Image by author | logos from WordPress and GitHub</figcaption></figure><p name="7d45" id="7d45" class="graf graf--p graf-after--figure">I started my first blog in 2010. Using <a href="https://wordpress.org/" data-href="https://wordpress.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">WordPress</a> was obvious at that time. It was a good choice because it’s easy to use and has thousands of themes and plugins. WordPress is an amazing engine, but it has its downsides. It is resource-demanding, and there are many WordPress-related vulnerabilities. One of the possible solutions is <a href="https://medium.com/better-programming/how-to-make-your-wordpress-site-safe-and-fast-with-amazon-cloudfront-444c2c7df50e" data-href="https://medium.com/better-programming/how-to-make-your-wordpress-site-safe-and-fast-with-amazon-cloudfront-444c2c7df50e" class="markup--anchor markup--p-anchor" target="_blank">putting the whole site behind CloudFront</a> or any other CDN. The CDN scales well and keeps the site safe, but in my case, the blog was only an archive, and I didn’t want to keep my server running. This is the reason why I’ve chosen <a href="https://pages.github.com/" data-href="https://pages.github.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">GitHub Pages</a>.</p><p name="0f87" id="0f87" class="graf graf--p graf-after--p">GitHub Pages is the “poor man’s hosting solution.” It’s free, and you can point your domain to it. The disadvantage is that it can host only static sites, so I had to generate a static site from my WordPress blog.</p><p name="518c" id="518c" class="graf graf--p graf-after--p">Fortunately, WordPress can export (Tools/Export on the admin) the whole site’s content into an XML file, so I only had to develop a simple static site generator that generates the content from the export. I choose TypeScript for the development because I’m familiar with it, and there are many cool and easy-to-use JS libs to do it.</p><p name="4682" id="4682" class="graf graf--p graf-after--p">First, I had to find a simple, easy-to-use XML parser. After a short Google search, I found <a href="https://www.npmjs.com/package/fast-xml-parser" data-href="https://www.npmjs.com/package/fast-xml-parser" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">fast-xml-parser</a>. This parser creates a JS object tree from the XML that can be easily processed.</p><p name="43d3" id="43d3" class="graf graf--p graf-after--p">Another thing that I needed was a simple template engine. For this purpose, <a href="https://ejs.co/" data-href="https://ejs.co/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">ejs</a> is the best. It’s easy to learn because you can embed your JS into the HTML code, and also fast because, in the background, the engine compiles your template into JS. For small projects, I cannot imagine an easier and better solution.</p><p name="fd6f" id="fd6f" class="graf graf--p graf-after--p">I had everything I needed, so I developed my small static site generator.</p><p name="f631" id="f631" class="graf graf--p graf-after--p">To create the ejs templates, I downloaded the HTML files generated by WordPress and added the ejs tags to them. I created two templates. One for the posts and another for the table of contents.</p><p name="d31b" id="d31b" class="graf graf--p graf-after--p">The structure of the export XML is very easy. It’s an RSS feed that is built from items. Every item has a type (post, attachment, etc.), but I needed only the posts and the attachments. The code looks like this:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="typescript" name="3971" id="3971" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {<br />    <span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLParser</span>();<br />    <span class="hljs-keyword">let</span> wp_export = parser.<span class="hljs-title function_">parse</span>(<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;wordpress-export.xml&#x27;</span>));<br />    <span class="hljs-keyword">let</span> posts = wp_export.<span class="hljs-property">rss</span>.<span class="hljs-property">channel</span>.<span class="hljs-property">item</span>;<br /><br />    <span class="hljs-keyword">let</span> <span class="hljs-attr">pinned_posts</span>: <span class="hljs-built_in">any</span>[] = []<br />    <span class="hljs-keyword">let</span> <span class="hljs-attr">post_list</span>: <span class="hljs-built_in">any</span>[] = []<br />    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> post <span class="hljs-keyword">of</span> posts) {<br /><br />        <span class="hljs-comment">// download attachments</span><br />        <span class="hljs-keyword">if</span> (post[<span class="hljs-string">&#x27;wp:post_type&#x27;</span>] == <span class="hljs-string">&#x27;attachment&#x27;</span>) {<br />            <span class="hljs-keyword">const</span> url = post[<span class="hljs-string">&#x27;wp:attachment_url&#x27;</span>];<br />            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> post_meta <span class="hljs-keyword">of</span> post[<span class="hljs-string">&#x27;wp:postmeta&#x27;</span>]) {<br />                <span class="hljs-keyword">if</span> (post_meta[<span class="hljs-string">&#x27;wp:meta_key&#x27;</span>] == <span class="hljs-string">&#x27;_wp_attached_file&#x27;</span>) {<br />                    <span class="hljs-keyword">const</span> file_path = post_meta[<span class="hljs-string">&#x27;wp:meta_value&#x27;</span>]<br />                    <span class="hljs-keyword">const</span> full_path = <span class="hljs-string">`wp-content/uploads/<span class="hljs-subst">${file_path}</span>`</span><br />                    <span class="hljs-title function_">mkdirSync</span>(<span class="hljs-title function_">dirname</span>(full_path), { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });<br />                    <span class="hljs-keyword">const</span> file = <span class="hljs-title function_">createWriteStream</span>(full_path);<br />                    http.<span class="hljs-title function_">get</span>(url, <span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> {<br />                        resp.<span class="hljs-title function_">pipe</span>(file);<br />                        file.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;finish&quot;</span>, <span class="hljs-function">() =&gt;</span> {<br />                            file.<span class="hljs-title function_">close</span>();<br />                        });<br />                    })<br />                }<br />            }<br />        }<br /><br />        <span class="hljs-comment">// generate post page if it&#x27;s published</span><br />        <span class="hljs-keyword">if</span> (post[<span class="hljs-string">&#x27;wp:post_type&#x27;</span>] == <span class="hljs-string">&#x27;post&#x27;</span> &amp;&amp; post[<span class="hljs-string">&#x27;pubDate&#x27;</span>]) {<br />            post[<span class="hljs-string">&#x27;content:encoded&#x27;</span>] = post[<span class="hljs-string">&#x27;content:encoded&#x27;</span>].<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\r?\n|\r|\n/g</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">accumulator: <span class="hljs-built_in">string</span>, currentValue: <span class="hljs-built_in">string</span></span>) =&gt;</span> accumulator + <span class="hljs-string">`&lt;p&gt;<span class="hljs-subst">${currentValue}</span>&lt;/p&gt;`</span>)<br /><br />            <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> ejs.<span class="hljs-title function_">renderFile</span>(<span class="hljs-string">&quot;template.ejs&quot;</span>, { <span class="hljs-attr">post</span>: post }, { <span class="hljs-attr">async</span>: <span class="hljs-literal">true</span> })<br />            <span class="hljs-title function_">mkdirSync</span>(<span class="hljs-string">`archives/<span class="hljs-subst">${post[<span class="hljs-string">&#x27;wp:post_id&#x27;</span>]}</span>`</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });<br />            <span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">`archives/<span class="hljs-subst">${post[<span class="hljs-string">&#x27;wp:post_id&#x27;</span>]}</span>/index.html`</span>, content)<br /><br />            <span class="hljs-keyword">const</span> element = {<br />                <span class="hljs-attr">id</span>: post[<span class="hljs-string">&#x27;wp:post_id&#x27;</span>],<br />                <span class="hljs-attr">title</span>: post.<span class="hljs-property">title</span>,<br />                <span class="hljs-attr">summary</span>: <span class="hljs-title function_">truncate</span>(post[<span class="hljs-string">&#x27;content:encoded&#x27;</span>].<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;[^&gt;]*&gt;?/gm</span>, <span class="hljs-string">&#x27;&#x27;</span>), <span class="hljs-number">300</span>)<br />            }<br /><br />            <span class="hljs-keyword">if</span> (pinned_post_ids.<span class="hljs-title function_">includes</span>(post[<span class="hljs-string">&#x27;wp:post_id&#x27;</span>])) {<br />                pinned_posts.<span class="hljs-title function_">push</span>(element)<br />            } <span class="hljs-keyword">else</span> {<br />                post_list.<span class="hljs-title function_">push</span>(element)<br />            }<br />        }<br />    }<br /><br />    <span class="hljs-comment">// generate toc</span><br />    pinned_posts.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> { <span class="hljs-keyword">return</span> b.<span class="hljs-property">id</span> - a.<span class="hljs-property">id</span> })<br />    <span class="hljs-keyword">let</span> merged_posts = pinned_posts.<span class="hljs-title function_">concat</span>(post_list.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> { <span class="hljs-keyword">return</span> b.<span class="hljs-property">id</span> - a.<span class="hljs-property">id</span> }))<br /><br />    <span class="hljs-comment">// readme.md</span><br />    <span class="hljs-keyword">let</span> readme = <span class="hljs-string">`<br /># my-wordpress-blog<br />This is a backup of my Wordpress blog. (http://lf.estontorise.hu/)<br /><br /><br />`</span><br />    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> post <span class="hljs-keyword">of</span> merged_posts)<br />        readme += <span class="hljs-string">`[<span class="hljs-subst">${post.title}</span>](https://thebojda.github.io/my-wordpress-blog/archives/<span class="hljs-subst">${post.id}</span>)\n\n`</span><br />    <span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">&#x27;README.md&#x27;</span>, readme)<br /><br />    <span class="hljs-comment">// index.html</span><br />    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> ejs.<span class="hljs-title function_">renderFile</span>(<span class="hljs-string">&quot;template_toc.ejs&quot;</span>, { <span class="hljs-attr">posts</span>: merged_posts }, { <span class="hljs-attr">async</span>: <span class="hljs-literal">true</span> })<br />    <span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">`index.html`</span>, content)<br />})()</span></pre><p name="8375" id="8375" class="graf graf--p graf-after--pre">The code iterates on the items and checks their type. If the type is “attachment,” it reads the value of the <code class="markup--code markup--p-code">_wp_attached_file</code> metadata containing the attachment URL and downloads it using the HTTP module.</p><p name="3ba4" id="3ba4" class="graf graf--p graf-after--p">If the item type is “post” and it is published (<code class="markup--code markup--p-code">pubDate</code> is not empty) then generate the page. The page content is in the <code class="markup--code markup--p-code">content:encoded</code> tag in HTML format with a little twist. Every line is a separate paragraph, so you must convert the line breaks into paragraphs. The following line of code does this:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="typescript" name="24ae" id="24ae" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">post[<span class="hljs-string">&#x27;content:encoded&#x27;</span>] = <br />  post[<span class="hljs-string">&#x27;content:encoded&#x27;</span>]<br />  .<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\r?\n|\r|\n/g</span>)<br />  .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">accumulator: <span class="hljs-built_in">string</span>, currentValue: <span class="hljs-built_in">string</span></span>) =&gt;</span> <br />    accumulator + <span class="hljs-string">`&lt;p&gt;<span class="hljs-subst">${currentValue}</span>&lt;/p&gt;`</span>)</span></pre><p name="0cb6" id="0cb6" class="graf graf--p graf-after--pre">Ten years ago, when I started my blog, I knew nothing about SEO, so the post links look like this: …/archives/123, where the last number is the post id. In a better case, the post URL is more expressive and contains keywords, but in both cases, you will face the problem that GitHub Pages doesn’t support HTML pages without the “.html” extension.</p><p name="670c" id="670c" class="graf graf--p graf-after--p">If you upload an HTML file without an extension, the browser will download it instead of showing it. Because of this, you must convert these URLs into directories containing an <code class="markup--code markup--p-code">index.htm</code>l file. For example, /archives/123 has to be converted to /archives/123/index.html. With this new structure, everything works like a charm.</p><p name="95a7" id="95a7" class="graf graf--p graf-after--p">The last block of the code generates the ToC HTML and a <code class="markup--code markup--p-code">readme.md</code> file. The second can be very useful if somebody finds your page on GitHub because they can easily navigate to your posts.</p><p name="6d42" id="6d42" class="graf graf--p graf-after--p">When the static page generation was finished, I uploaded my site to GitHub and enabled GitHub Pages in Settings.</p><figure name="14b0" id="14b0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*hnu9Qe_hk4KqCm8MLX9D5A.png" data-width="830" data-height="635" src="https://cdn-images-1.medium.com/max/800/1*hnu9Qe_hk4KqCm8MLX9D5A.png"></figure><p name="8f2b" id="8f2b" class="graf graf--p graf-after--figure">After I set the CNAME record on my DNS provider’s admin, GitHub checked it. By checking the Enforce HTTPS checkbox, GitHub generated an HTTPS certificate, and after a little while, the site was ready. Here you can watch the result: <a href="https://lf.estontorise.hu." data-href="https://lf.estontorise.hu." class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://lf.estontorise.hu.</a> The blog is in Hungarian, so you probably won’t understand the content, but you can see that everything works well, and the URLs are the same as the WordPress URLs.</p><p name="03bc" id="03bc" class="graf graf--p graf-after--p">As I wrote, this blog is only an archive, and I don’t plan to create new posts, but if I wanted, I could install my WordPress engine on my local machine, write new posts, and update the newly generated pages in the repo. So if you want to use WordPress for blogging and GitHub for hosting the pages, it is also possible.</p><p name="68d5" id="68d5" class="graf graf--p graf-after--p">This was my short journey from WordPress to GitHub Pages. I hope this short article can help you migrate your blog if you want.</p><p name="b8b0" id="b8b0" class="graf graf--p graf-after--p graf--trailing">(You can find everything in my <a href="https://github.com/TheBojda/my-wordpress-blog" data-href="https://github.com/TheBojda/my-wordpress-blog" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">GitHub repo</a>.)</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thebojda" class="p-author h-card">Laszlo Fazekas</a> on <a href="https://medium.com/p/842afd262f9a"><time class="dt-published" datetime="2023-01-02T19:58:10.136Z">January 2, 2023</time></a>.</p><p><a href="https://medium.com/@thebojda/how-i-migrated-my-wordpress-site-to-github-pages-842afd262f9a" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on February 1, 2023.</p></footer></article></body></html>
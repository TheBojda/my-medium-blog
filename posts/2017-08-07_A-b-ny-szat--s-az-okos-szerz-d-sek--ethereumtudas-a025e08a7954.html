<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>A bányászat és az okos szerződések #ethereumtudas</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">A bányászat és az okos szerződések #ethereumtudas</h1>
</header>
<section data-field="subtitle" class="p-summary">
Az előző részben már említettük, hogy a blokklánc egy nagyon megbízható, tranzakciók sorából álló adatbázis. Ha valami ide bekerül, az…
</section>
<section data-field="body" class="e-content">
<section name="4099" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="537f" id="537f" class="graf graf--h3 graf--leading graf--title"><strong class="markup--strong markup--h3-strong">A bányászat és az okos szerződések #ethereumtudas</strong></h3><p name="6f90" id="6f90" class="graf graf--p graf-after--h3">Az előző részben már említettük, hogy a blokklánc egy nagyon megbízható, tranzakciók sorából álló adatbázis. Ha valami ide bekerül, az onnantól kezdve ott is marad. Ez a rész még mindig elméleti lesz, de ahhoz, hogy érthetőek legyenek a későbbiek egy kicsit még bele kell mennünk a a blokklánc működésébe, meg kell ismerkedünk a bányászat fogalmával és pár szót ejtünk majd az okos szerződések működéséről is.</p><figure name="3747" id="3747" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 466px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.60000000000001%;"></div><img class="graf-image" data-image-id="1*c-yqs8rGEcMtw_xBlzWF2w.jpeg" data-width="1280" data-height="853" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*c-yqs8rGEcMtw_xBlzWF2w.jpeg"></div></figure><p name="bb18" id="bb18" class="graf graf--p graf-after--figure">Megjegyzés: Ezt cikket már ketten írjuk <a href="https://medium.com/u/f91cbcd0bc44" data-href="https://medium.com/u/f91cbcd0bc44" data-anchor-type="2" data-user-id="f91cbcd0bc44" data-action-value="f91cbcd0bc44" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Gabriel</a>lel. Az ő megjegyzéseit dőlt betűkkel kiemeljük.</p><blockquote name="b6ca" id="b6ca" class="graf graf--blockquote graf-after--p">Gabriel: Az egyik Facebook csoportban van akit zavar a haladási tempó. Könyörgöm a második résznél tartunk és kellenek az alapok. Aki fejlesztő / programozó, az talál az interneten rengeteg leírást. A cikksorozat célja a laikusok, a nem programozók felzárkóztatása. Az ENVIENTA egy non-profit szervezet, amely ingyen szervez online oktatásokat a lehetőleg legérthetőbb formában. Ennek viszont az ára, hogy olyan fogalmakat is el kell magyarázni, ami egyesek számára vicces, mások számára viszont nagyon is új, vagy épp helyére rakja a fogalmakat. Ezek az alapok, de ahogy ígértük, nemsokára jönnek a kódok, csak ezeket hova írjuk ha például még nincs feltelepített tesztkörnyezetünk. Ez egy folyamat, amin végig kell mennünk.</blockquote><h3 name="b12d" id="b12d" class="graf graf--h3 graf-after--blockquote">A kihívás</h3><p name="ea89" id="ea89" class="graf graf--p graf-after--h3">Az világos, hogy a blokklánc egyenrangú gépek (decentralizált) hálózatán működik. A klasszikus internettel ellentétben, itt nincsenek központi csomópontok, épp ezért ha egy tranzakciót szeretnénk a központi adatbázisba írni (pl. pénzt szeretnénk utalni valakinek), ezt az információt szét kell küldenünk a hálózatba. A gyakorlatban ez úgy történik, hogy a tranzakciót elküldjük pár általunk ismert csomópontnak, azok továbbküldik az ő általuk ismert csomópontoknak, és így tovább. Ezzel a módszerrel az adott tranzakció hamar szétterjed a hálózatban. Minden tranzakciót digitális aláírás hitelesít: például ez biztosítja, hogy a mi számlánkról csakis mi utalhassunk pénzt valaki másnak, és rajunk kívül ezt senki más ne tehesse meg. Ez eddig nem hangzik túl bonyolultnak, az összetettség csak ezután következik.</p><p name="0986" id="0986" class="graf graf--p graf-after--p">A hálózatba szétszórt tranzakciókból ugyanis egyetlen közös adatbázist kellene építeni, ami korántsem lenne egyszerű feladat egy olyan hálózatban, ahol nincsenek központi csomópontok amelyek ezt a folyamatot irányítanák.</p><h3 name="8ea0" id="8ea0" class="graf graf--h3 graf-after--p">Mi a bányászat?</h3><p name="9afa" id="9afa" class="graf graf--p graf-after--h3">A megoldást Statoshi Nakamoto találta meg, akiről az előző részben már ejtettünk pár szót. A megoldás a következő: szükség van pár speciális csomópontra, ezek a bányászok (hogy miért nevezzük így őket, az majd később kiderül). Mivel a hálózat egyenrangú, ezért bárki jelentkezhet bányásznak. A bányászok összeszedik a hozzájuk beérkező tranzakciókat és blokkokba csomagolják őket. Ezt követően eszeveszett verseny kezdődik, hogy a nagy közös blokklánc végére ki rakja oda a következő blokkot. Ez a gyakorlatban azt jelenti, hogy a bányászoknak egy nehéz matematikai feladványt kell megoldaniuk. Amelyik csomópont leghamarabb megoldja a feladványt, az a csomópont nyer és fűzheti fel a lánc végére a következő blokkot. A feladvány nehézsége folyamatosan változik, úgy hogy a blokkok körülbelül azonos időközönként kövessék egymást (ez a Bitcoin esetén pl. kb. 10 perc).</p><p name="247e" id="247e" class="graf graf--p graf-after--p">De miért akarna bárki is önszántából blokkokat készíteni és számítási kapacitást nem kímélve a többiekkel versenyezni, hogy ő fűzhesse a következő blokkot a lánc végére?</p><p name="4b10" id="4b10" class="graf graf--p graf-after--p">Nos, akinek ez sikerül, az komoly (Bitcoin esetén ez több millió forint) pénzjutalmat kap. Mind a Bitcoin, mind az Ethereum esetén a rendszerben létező kriptovaluta mennyisége korlátozott, ami ezen blokk készítési folyamat során kerül kiosztásra. Azért nevezték el a blokk generálási folyamatot bányászatnak, mivel valóban olyan, mint aranyat bányászni. A rendszerben lévő fix mennyiségű kriptovaluta az “arany” és minden egyes blokk létrejöttével ebből egy kis darab a versenyt megnyerő bányászhoz kerül. Mivel a bányázok közt folyamatos verseny van, ezért a bányászathoz (a blokk létrehozásához és a matematika feladat megoldásához) szükséges számítási kapacitás mára már az egekbe szökött. Becslések szerint a teljes Bitcoin számítási kapacitás többszörösen meghaladja a létező legerősebb szuperszámítógépét és a működtetéséhez szükséges energia egy kisebb ország energiafogyasztásának felel meg.</p><figure name="1740" id="1740" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 640px; max-height: 480px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="1*0TtGYFZOGxj3VYrd5T_5vg.jpeg" data-width="640" data-height="480" src="https://cdn-images-1.medium.com/max/800/1*0TtGYFZOGxj3VYrd5T_5vg.jpeg"></div><figcaption class="imageCaption">A teljes Bitcoin számítási kapacitás működtetéséhez szükséges energia egy kisebb ország energiafogyasztásának felel meg.</figcaption></figure><p name="047d" id="047d" class="graf graf--p graf-after--figure">De miért van szükség ilyen hihetetlen mennyiségű erőforrásra egy egyszerű adatbázis működtetéséhez?</p><p name="bbd3" id="bbd3" class="graf graf--p graf-after--p">Valójában a hasznos munka (a blokkok létrehozása) elenyésző erőforrás igénnyel rendelkezik ahhoz képest ami elmegy a versenyzésre. A látszattal ellentétben azonban ez mégsem teljesen felesleges. Minél nagyobb a verseny (minél nagyobb számítási kapacitásra van szükség az új blokk létrehozásához), annál nehezebb átvenni az irányítást a hálózat felett. Ahogyan az előző részben említettük, a blokklánc megbízhatóságát az adja, hogy minden blokkot másik csomópont hitelesít (más csomópont bányász ki). A fenti rendszerben ezt a verseny biztosítja. Ahhoz, hogy a hálózat felett bárki átvegye az irányítást (kizárólag ő készíthessen blokkokat), a meglévőnél nagyobb számítási kapacitással kellene rendelkeznie, ami mint említettük, sokszorosan meghaladja a létező legerősebb szuperszámítógépét. Ettől még persze a megoldás elég pazarló (gondoljunk csak az országnyi áramfogyasztásra), így az ezt kiváltó alternatívákat folyamatosan kutatják.</p><h3 name="c128" id="c128" class="graf graf--h3 graf-after--p">Az Ethereum bányászatról</h3><p name="2e5d" id="2e5d" class="graf graf--p graf-after--h3">Az Ethereum esetén tervben van a “proof of stake” nevű metódusra való áttérés (a jelenlegi megoldást “proof of work”-nek hívják), ahol nem számítási kapacitással kell majd versenyezni, hanem kriptovaluta lekötésével.</p><h3 name="dd13" id="dd13" class="graf graf--h3 graf-after--p">Eddig csak pénzügyi tranzakciókról volt szó. No de hogy jönnek a képbe az okos szerződések?</h3><p name="e897" id="e897" class="graf graf--p graf-after--h3">Egy okos szerződés létrehozása tulajdonképpen maga is tranzakció. A tranzakció adat része tartalmazza az okos szerződés kódját (ez az Ethereum esetén egy speciális bájtkód) valamint egy pénzösszeget amit a szerződés rögzítéséért ajánlunk fel a bányásznak. A pénzösszeg az Ethereum saját valutájában (Etherben) kerül megadásra. A bányász csomópontok mindig maguk dönthetik el, hogy az általuk elkészített blokkba milyen tranzakciókat raknak bele, a döntési folyamatot pedig nagyban befolyásolja, hogy az adott tranzakció blokkba írásáért mekkora tranzakciós díjat ajánlunk fel. Ha a bányász sikerrel jár (ő oldja meg leggyorsabban a feladványt, így ő fűzheti fel a következő blokkot), akkor őt illeti a blokkban lévő összes tranzakció díja. Az okos szerződések kódja tehát pontosan úgy kerül be a blokkláncba, mint bármely más pénzügyi tranzakció. Szokták a folyamatot úgy is emlegetni, hogy a bányász “kibányászta a szerződést”<em class="markup--em markup--p-em"> (Gabriel: … ami persze egy elég hülye kifejezés.)</em></p><h3 name="99e1" id="99e1" class="graf graf--h3 graf-after--p">Mit lehet kezdeni egy blokkláncba írt okos szerződéssel?</h3><p name="b55c" id="b55c" class="graf graf--p graf-after--h3">Egy okos szerződés szolgáltatásokat (metódusok) kínál a felhasználók számára, illetve rendelkezhet valamilyen belső állapottal (ezt mindjárt kifejtjük részletesen). Amikor a bányász “kibányássza a szerződést”, az kap egy Ethereum azonosítót. Innentől kezdve a szerződés külön entitásként működik. Van egy saját számlája, ahová pénzt lehet neki utalni, illetve mindenki számára elérhetőek az általa nyújtott szolgáltatások. Egy okos szerződés kódjának futtatása ugyanúgy pénzbe kerül mint a létrehozása, a kód futtatásának árát pedig mindig a szolgáltatást igénybe vevő felhasználó állja (tehát nem a szerződés, vagy annak létrahozója, stb.).</p><p name="4081" id="4081" class="graf graf--p graf-after--p">Ahogyan az előbbiekben említettük, az okos szerződés rendelkezhet valamilyen belső állapottal, ami azt jelenti, hogy lehetnek belső változói. Éljünk egy nagyon egyszerű példával: saját valutát megvalósító okos szerződésben ilyen belső változó lehet az a lista, ahol nyilvántartjuk, hogy melyik Ethereum felhasználónak mennyi van az adott valutából (tokenből) a számláján. Ha az okos szerződés hivatkozott funkciója csak adatot olvas, akkor az nem kerül pénzbe, hisz a blokkláncból minden csomópont rendelkezik egy saját változattal, így a kód helyben is lefuttatható.</p><p name="ceac" id="ceac" class="graf graf--p graf-after--p">Amennyiben az adott funkció valamit ír a blokkláncba (pl. egy változónak megváltoztatja az értékét) azért már tranzakciós díjat kell fizetni, hiszen a blokkláncba csak az adott blokkot létrehozó bányász írhatja azt be, aki nem dolgozik ingyen.</p><blockquote name="6c3a" id="6c3a" class="graf graf--blockquote graf-after--p">Gabriel: A fenti saját valutás példánál maradva tehát ha valakinek ki szeretnénk olvasni az egyenlegét (csak blokklánc olvasás) az nem kerül pénzbe, míg ha utalni szeretnénk neki (blokkláncba kell írni az egyenleg változásokat), az már pénzbe kerül. Ezt nevezzük Gas-nak (ami az amerikai üzemanyag kifejezésből átvett fogalom), logikusan hiszen ez motiválja vagy “hajtja meg” a tranzakciót. A felajánlott Gas mértéke egyébként walletenként (virtuális pénztárcánként), szolgáltatásonként eltérő, de logikusan az is érvényes, hogy aki nagyobb Gas értéket állít be annak a tranzakciója — hamarabb kerül feldolgozásra, míg egy alacsony Gas értékű folyamat akár napokig is eltarthat (jogosan, hiszen nehezebben találni olyan bányászt — és itt nem a gépet üzemeltető emberünkre kell gondolni hanem a gépre — aki kevesebb összegért is képes elvégezni a számítást).</blockquote><h3 name="d7a7" id="d7a7" class="graf graf--h3 graf-after--blockquote">Kövess minket!</h3><p name="0e27" id="0e27" class="graf graf--p graf-after--h3">A cikksorozat további részeiben ezekkel az okos szerződésekkel fogunk közelebbről megismerkedni, és megtanuljuk azt is, hogy hogyan készíthetünk ilyeneket mi magunk is.</p><p name="4df4" id="4df4" class="graf graf--p graf-after--p">Hogy mindez tényleg felfogható lehessen a cikksorozatot ketten fogjuk írni. A programozói részekért jómagam <a href="https://medium.com/u/792a8f999852" data-href="https://medium.com/u/792a8f999852" data-anchor-type="2" data-user-id="792a8f999852" data-action-value="792a8f999852" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Laszlo Fazekas</a> (fejlesztő) felelek majd, azért pedig, hogy tényleg minden érthető legyen <a href="https://medium.com/u/f91cbcd0bc44" data-href="https://medium.com/u/f91cbcd0bc44" data-anchor-type="2" data-user-id="f91cbcd0bc44" data-action-value="f91cbcd0bc44" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Gabriel Varaljay</a> (marketing) “játssza majd a naivat” (tesz fel kérdéseket, magyarázza újra a feldolgozott anyagot).</p><p name="3dcb" id="3dcb" class="graf graf--p graf-after--p graf--trailing">Épp ezért érdemes feliratkoznod <a href="https://medium.com/envienta-magyarország" data-href="https://medium.com/envienta-magyarország" class="markup--anchor markup--p-anchor" target="_blank">ERRE a medium csatornára</a>, de követheted az ENVIENTA Magyarországot <a href="https://twitter.com/envientahun" data-href="https://twitter.com/envientahun" class="markup--anchor markup--p-anchor" rel="nofollow noopener noopener" target="_blank">Twitteren</a>, vagy akár csatlakozhatsz a <a href="https://www.facebook.com/groups/1459500857429638/" data-href="https://www.facebook.com/groups/1459500857429638/" class="markup--anchor markup--p-anchor" rel="nofollow noopener noopener" target="_blank">tematikus Facebook csoportunkhoz</a> is.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thebojda" class="p-author h-card">Laszlo Fazekas</a> on <a href="https://medium.com/p/a025e08a7954"><time class="dt-published" datetime="2017-08-07T11:01:00.904Z">August 7, 2017</time></a>.</p><p><a href="https://medium.com/@thebojda/a-b%C3%A1ny%C3%A1szat-%C3%A9s-az-okos-szerz%C5%91d%C3%A9sek-ethereumtudas-a025e08a7954" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on January 31, 2020.</p></footer></article></body></html>
<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The Invisible Hand of Web 3: How Profit-Driven Node Operators Ensure the Quality of Ethereum…</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">The Invisible Hand of Web 3: How Profit-Driven Node Operators Ensure the Quality of Ethereum…</h1>
</header>
<section data-field="subtitle" class="p-summary">
Although imperfect, a free-market economy is still the best economic system. Its success is based on a straightforward rule: be selfish! If…
</section>
<section data-field="body" class="e-content">
<section name="fd75" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ce17" id="ce17" class="graf graf--h3 graf--leading graf--title">The Invisible Hand of Web 3: How Profit-Driven Node Operators Ensure the Quality of Ethereum Swarm’s Decentralized Cloud Service</h3><figure name="14ee" id="14ee" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*AkMlroHMNVD9juUC0CDc5Q.png" data-width="1792" data-height="1024" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*AkMlroHMNVD9juUC0CDc5Q.png"></figure><p name="d6a1" id="d6a1" class="graf graf--p graf-after--figure">Although imperfect, a free-market economy is still the best economic system. Its success is based on a straightforward rule: be selfish! If this simple condition is met, meaning everyone is selfish and strives to maximize their profit, there is no need for any central regulation, as the ‘<a href="https://en.wikipedia.org/wiki/Invisible_hand" data-href="https://en.wikipedia.org/wiki/Invisible_hand" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">invisible hand</a>’ of the market can optimally distribute scarce resources.</p><p name="e278" id="e278" class="graf graf--p graf-after--p">This principle also drives the <a href="https://www.ethswarm.org/" data-href="https://www.ethswarm.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Ethereum Swarm</a> decentralized storage solution. In the case of Swarm, the system’s currency, the BZZ token, plays a crucial role. BZZ is not only the fuel of the system, but the ‘BZZ economy’ also determines the network’s topology and the distribution of data.</p><blockquote name="ddca" id="ddca" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">Just as the core element of a free-market economy is the rational consumer and producer, who always strives to maximize their benefit, the foundation of Ethereum Swarm is the rational node, which aims to maximize the ‘mined’ BZZ tokens.</strong></blockquote><p name="6749" id="6749" class="graf graf--p graf-after--blockquote">In the following sections, I will examine in detail how Swarm’s incentive system works and how this system optimizes the topology and the distribution of data.</p><h4 name="ad6b" id="ad6b" class="graf graf--h4 graf-after--p">Bandwidth incentive</h4><p name="d2d7" id="d2d7" class="graf graf--p graf-after--h4">Unlike many other systems, with Swarm, we have to pay the serving nodes for the bandwidth used. At first, this philosophy might seem strange, as we are used to not paying for incoming data traffic on the web. However, anyone who has ever run something on a cloud service knows that bandwidth has a price, and if we handle large amounts of data traffic, this price can be a significant part of the costs. Users don’t see this because providers hide it. For example, when we use Facebook, Meta pays for the data traffic directed toward us, but the cost is covered by the advertisements that appear between posts. The service is free because you are the product!</p><blockquote name="418b" id="418b" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">Swarm is honest! There are no ads, and no one monetizes our data, but in return, we have to pay for the bandwidth.</strong></blockquote><p name="e7f6" id="e7f6" class="graf graf--p graf-after--blockquote">This approach opens up entirely new business opportunities for content providers. If someone wants to launch a service that requires high bandwidth, such as a streaming service, a significant initial investment is needed to set up and maintain the infrastructure. However, with Swarm, the infrastructure is already in place, the system automatically scales, and the bandwidth costs are covered by the users. Therefore, the content provider only needs to pay for storage costs, which is a minimal investment. Additionally, the network grows along with the user base.</p><blockquote name="3867" id="3867" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">While in a traditional streaming service, accommodating an increased number of users can be a challenge, in the case of Swarm, every new user can also become a provider node, further increasing the total bandwidth of the network.</strong></blockquote><p name="6188" id="6188" class="graf graf--p graf-after--blockquote">Every Swarm node keeps track of how much data it has sent and received from each peer it is connected to. This solution is similar to the Lightning Network’s payment channels.</p><figure name="750f" id="750f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*MrKhff4aiKbjybfV" data-width="601" data-height="193" src="https://cdn-images-1.medium.com/max/800/0*MrKhff4aiKbjybfV"><figcaption class="imageCaption">source: <a href="https://www.ethswarm.org/the-book-of-swarm-2.pdf" data-href="https://www.ethswarm.org/the-book-of-swarm-2.pdf" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank">https://www.ethswarm.org/the-book-of-swarm-2.pdf</a></figcaption></figure><p name="e711" id="e711" class="graf graf--p graf-after--figure">As long as the difference between the peers in terms of network consumption remains within a certain limit, we have a truly equal give-and-take situation and no compensation is needed. If the balance exceeds a threshold, the node must pay for the data traffic. In Swarm, this does not happen through a blockchain transaction. Instead, the node issues a cheque. A cheque is a digitally signed commitment that works similarly to real cheques. Instead of the bank, Swarm cheques can be cashed on the blockchain through the checkbook contract. Every node has such a contract, where the cheques issued by the node can be redeemed by its peers. Since cheques can be redeemed in bulk, this helps to minimize the gas cost of transactions.</p><p name="027d" id="027d" class="graf graf--p graf-after--p">Swarm uses forwarding Kademlia. This means that when a node needs some content, it requests it from a connected peer. If that node doesn’t have the content, it also requests it from a connected peer, and this chain continues until the source of the content is reached. Due to the topology of the system, these chains are typically not long. If a node does not have the requested content, it must pay to acquire it, meaning it can only keep a portion of the amount paid by the requesting node. Therefore, if a node wants to optimize its profit, it is beneficial to cache popular content, so that when someone requests that content, the node can keep the full amount paid for it. Swarm’s forwarding Kademlia does not only mean that requests are relayed through successively closer peers to where the requested chunk is found, but also that the chunk is then relayed back the same route to the originator. This step allows the nodes en route to cache content prompted by retrieval, effectively implementing the automatic spreading of popular content.</p><p name="9c2a" id="9c2a" class="graf graf--p graf-after--p">This simple mechanism makes Swarm an ideal Content Delivery Network, as popular content will be more widely available, retrieved with lower latency, and potentially even persist despite not being insured through storage incentives. This solution relieves the source and ensures the optimal use of bandwidth. While the task of storage for each chunk is delegated to nodes in the neighborhood of the chunk, caching will relieve the nodes in this neighborhood from having to serve each and every request. This does not only mean that Swarm is resistant to DDoS attacks but also that it is actually anti-fragile, i.e., increases resilience under stress.</p><blockquote name="43d1" id="43d1" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">The bandwidth incentive ensures the optimal distribution of data in the long term, making Swarm an ideal Content Delivery Network.</strong></blockquote><h4 name="d718" id="d718" class="graf graf--h4 graf-after--blockquote"><strong class="markup--strong markup--h4-strong">Storage incentive</strong></h4><p name="46ec" id="46ec" class="graf graf--p graf-after--h4">If we want to store data in Swarm, we need to attach a postage stamp to each data chunk. The postage stamp works similarly to a real postage stamp. If we want to send a letter through the postal service, we need to put a stamp on it. This is how we pay for the postal service. If the letter doesn’t have a stamp, the postal service won’t deliver it, as the cost of delivery hasn’t been paid. Similarly, in Swarm, if a chunk doesn’t have a postage stamp, the nodes have no incentive to store it.</p><p name="16fb" id="16fb" class="graf graf--p graf-after--p">Swarm nodes are organized into neighborhoods (I have an <a href="https://hackernoon.com/understanding-the-ethereum-swarm-storage-scaling-mechanism" data-href="https://hackernoon.com/understanding-the-ethereum-swarm-storage-scaling-mechanism" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">entire article</a> about the neighborhood system), and all content is stored in its corresponding neighborhood. Storage nodes participate in a lottery, where the lottery ticket is the postage stamp and the associated chunk of content. A smart contract periodically selects a neighborhood. If the nodes in the winning neighborhood can prove (by Merkle proofs) that they are storing a sufficient amount of relevant content, they receive the reward. If a node is not storing the right content, it will be unable to generate the Merkle proof and will lose out on the reward.</p><p name="6663" id="6663" class="graf graf--p graf-after--p">The postage stamp is a digitally signed proof of pre-payment created by the user who wanted the data stored (uploader). To create a valid postage stamp, one needs a postage batch. The postage batch can be purchased from a smart contract. When a Swarm node wins the lottery and wants to claim its reward, this is only possible if the postage stamp belongs to a valid postage batch. Postage batches have an expiration date, so when that time passes, the postage stamp also becomes invalid. In such cases, the postage batch must either be renewed, or the content must be re-uploaded with a new postage stamp.</p><p name="e05d" id="e05d" class="graf graf--p graf-after--p">In summary, the mechanism works as follows:</p><ul class="postList"><li name="40bd" id="40bd" class="graf graf--li graf-after--p">Users purchase postage batches. The funds collected this way flow into a common pool. The content of this pool is distributed through lottery draws. The postage batch has an expiration date, starting from the moment of purchase. A postage batch is actually a hot wallet from which the storage rent is deducted. The batch expires whenever its balance runs out.</li><li name="e6ef" id="e6ef" class="graf graf--li graf-after--li">The user uses the postage batch to generate postage stamps, which are assigned to the data they want to upload. The amount of data that a particular postage batch can cover is determined by the user at the time of purchase (ex.: a batch for stamping 4G of data).</li><li name="70f0" id="70f0" class="graf graf--li graf-after--li">The user uploads the data to the network, which the nodes forward to the appropriate neighborhood, where the nodes store the data.</li><li name="0cae" id="0cae" class="graf graf--li graf-after--li">At certain intervals, the redistribution contract selects a neighborhood where the nodes can claim a portion of the pool’s contents as a reward, but only if they can prove with a valid postage stamp and Merkle proof that they are indeed storing the data.</li></ul><p name="00cb" id="00cb" class="graf graf--p graf-after--li">This system ensures the fair distribution of postage batch revenues among the nodes in the long term.</p><p name="689c" id="689c" class="graf graf--p graf-after--p">Since the reward is distributed equally among the nodes in the neighborhood, if a neighborhood is empty or contains few nodes, the reward is larger there, encouraging other nodes to relocate to that neighborhood to maximize their profit. If there are too many nodes in a neighborhood, the reward per node decreases, making it more beneficial to try in other neighborhoods. The equilibrium is reached at around 4 nodes, which provides sufficient redundancy for secure data storage. (Further redundancy can be achieved using <a href="https://papers.ethswarm.org/erasure-coding.pdf" data-href="https://papers.ethswarm.org/erasure-coding.pdf" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">erasure coding</a>, if necessary.)</p><blockquote name="9eac" id="9eac" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">The storage incentive ensures the ideal topology of the network in the long term, which, while providing sufficient redundancy, covers the address space with storage capacity in the most optimal way.</strong></blockquote><p name="24e9" id="24e9" class="graf graf--p graf-after--blockquote">Ethereum Swarm is a great example of how a well-designed incentive system can enable the functioning of a decentralized protocol through crypto-economics. Even in such systems, the ‘invisible hand’ emerges, capable of shaping and operating the system optimally. And all it requires is one simple rule: be selfish!</p><p name="d4e8" id="d4e8" class="graf graf--p graf-after--p">If you are interested in learning more about how Ethereum Swarm’s incentive system works, you can read about it in detail in the <a href="https://papers.ethswarm.org/p/book-of-swarm/" data-href="https://papers.ethswarm.org/p/book-of-swarm/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Book of Swarm</a>.</p><p name="f3e6" id="f3e6" class="graf graf--p graf-after--p graf--trailing">I would like to thank <a href="https://medium.com/u/f65d2a5bc4cb" data-href="https://medium.com/u/f65d2a5bc4cb" data-anchor-type="2" data-user-id="f65d2a5bc4cb" data-action-value="f65d2a5bc4cb" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Viktor Trón</a>, the architect of Ethereum Swarm, who greatly helped me in the creation of this article.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thebojda" class="p-author h-card">Laszlo Fazekas</a> on <a href="https://medium.com/p/60991b7929be"><time class="dt-published" datetime="2024-10-07T08:10:11.907Z">October 7, 2024</time></a>.</p><p><a href="https://medium.com/@thebojda/the-invisible-hand-of-web-3-how-profit-driven-node-operators-ensure-the-quality-of-ethereum-60991b7929be" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 26, 2024.</p></footer></article></body></html>